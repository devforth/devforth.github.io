"use strict";(self.webpackChunkadminforth=self.webpackChunkadminforth||[]).push([[3278],{4502:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>n,toc:()=>l});var n=o(1450),s=o(4848),i=o(8453);const r={slug:"compose-ec2-deployment-github-actions-registry",title:"IaaC Deploy setup to Amazon EC2 with GitHub actions, Deocker, terraform and self-hosted Docker Registry",authors:"ivanb",tags:["aws","terraform","github-actions"],description:"IaaC Deploy setup to Amazon EC2 with GitHub actions, Deocker, terraform and self-hosted Docker Registry",image:"ga-tf-aws.jpg"},a=void 0,c={authorsImageUrls:[void 0]},l=[];function d(e){const t={code:"code",img:"img",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"alt text",src:o(4582).A+"",width:"1200",height:"630"})}),"\n",(0,s.jsx)(t.p,{children:"This guide shows how to deploy own Docker apps (with AdminForth as example) to Amazon EC2 instance with Docker and Terraform involving Docker self-hosted registry."}),"\n",(0,s.jsx)(t.p,{children:"Needed resources:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["GitHub actions Free plan which includes 2000 minutes per month (1000 of 2-minute builds per month - more then enough for many projects, if you are not running tests etc). Extra builds would cost ",(0,s.jsx)(t.code,{children:"0.008$"})," per minute."]}),"\n",(0,s.jsxs)(t.li,{children:["AWS account where we will auto-spawn EC2 instance. We will use t3a.small instance (2 vCPUs, 2GB RAM) which costs ",(0,s.jsx)(t.code,{children:"~14$"})," per month in ",(0,s.jsx)(t.code,{children:"us-east-1"})," region (cheapest region)."]}),"\n",(0,s.jsx)(t.li,{children:"$2 per month for EBS gp2 storage (20GB) for EC2 instance"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This is it, registry will be auto-spawned on EC2 instance, so no extra costs for it. Also GitHub storage is not used, so no extra costs for it."}),"\n",(0,s.jsx)(t.p,{children:"The setup has next features:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Build process is done using IaaC approach with HashiCorp Terraform, so almoast no manual actions are needed from you. Every resource including EC2 server instance is described in code which is commited to repo and should not be manually clicked."}),"\n",(0,s.jsx)(t.li,{children:"Docker build process is done on GitHub actions, so EC2 server is not overloaded"}),"\n",(0,s.jsx)(t.li,{children:"Changes in infrastructure including changing server type, adding S3 Bucket, changing size of sever Disk is also done in code and can be done by commiting code to repo."}),"\n",(0,s.jsx)(t.li,{children:"Docker images and cache are stored on EC2 server, so no extra costs for Docker registry are needed."}),"\n",(0,s.jsx)(t.li,{children:"Total build time for average commit to AdminForth app (with vite rebuilds) is around 2 minutes."}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},4582:(e,t,o)=>{o.d(t,{A:()=>n});const n=o.p+"assets/images/ga-tf-aws-2618e638da36717e70f7fe4be33468e6.jpg"},8453:(e,t,o)=>{o.d(t,{R:()=>r,x:()=>a});var n=o(6540);const s={},i=n.createContext(s);function r(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),n.createElement(i.Provider,{value:t},e.children)}},1450:e=>{e.exports=JSON.parse('{"permalink":"/blog/compose-ec2-deployment-github-actions-registry","source":"@site/blog/2025-02-19-compose-ec2-deployment-ci-registry/index.md","title":"IaaC Deploy setup to Amazon EC2 with GitHub actions, Deocker, terraform and self-hosted Docker Registry","description":"IaaC Deploy setup to Amazon EC2 with GitHub actions, Deocker, terraform and self-hosted Docker Registry","date":"2025-02-19T00:00:00.000Z","tags":[{"inline":false,"label":"AWS","permalink":"/blog/tags/aws","description":"Amazon Web Services (AWS) is a cloud computing platform that provides a wide range of services for building and deploying applications."},{"inline":false,"label":"Terraform","permalink":"/blog/tags/terraform","description":"Terraform is an open-source infrastructure as code software tool created by HashiCorp that enables users to define and provision data center infrastructure using a declarative configuration language."},{"inline":false,"label":"GitHub Actions","permalink":"/blog/tags/github-actions","description":"GitHub Actions is a continuous integration and continuous deployment (CI/CD) service provided by GitHub that allows you to automate your software development workflows."}],"readingTime":18.595,"hasTruncateMarker":true,"authors":[{"name":"Ivan Borshcho","title":"Maintainer of AdminForth","url":"https://github.com/ivictbor","imageURL":"https://avatars.githubusercontent.com/u/1838656?v=4","key":"ivanb","page":null}],"frontMatter":{"slug":"compose-ec2-deployment-github-actions-registry","title":"IaaC Deploy setup to Amazon EC2 with GitHub actions, Deocker, terraform and self-hosted Docker Registry","authors":"ivanb","tags":["aws","terraform","github-actions"],"description":"IaaC Deploy setup to Amazon EC2 with GitHub actions, Deocker, terraform and self-hosted Docker Registry","image":"ga-tf-aws.jpg"},"unlisted":false,"nextItem":{"title":"How I Open-Sourced My Secret Access Tokens from GitHub, Slack, and NPM \u2014 and Who Actually Cares","permalink":"/blog/how-i-opensourced-my-secret-tokens"}}')}}]);