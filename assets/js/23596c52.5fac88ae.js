"use strict";(self.webpackChunkadminforth=self.webpackChunkadminforth||[]).push([[5276],{69720:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var o=i(74848),n=i(28453);const r={slug:"compose-aws-ec2-ecr-terraform-github-actions",title:"IaaC Simplified: Amazon EC2 Deployments with GitHub Actions, Terraform, Docker & Amazon ECR",authors:"ivanb",tags:["aws","terraform","github-actions"],description:"The ultimate step-by-step guide to cost-effective, build-time-efficient, and easy managable EC2 deployments using GitHub Actions, Terraform, Docker, and a Amazon ECR registry.",image:"/ogs/ga-tf-ecr.jpg"},s=void 0,a={permalink:"/blog/compose-aws-ec2-ecr-terraform-github-actions",source:"@site/blog/2025-02-19-compose-aws-ec2-ecr-terraform-github-actions/index.md",title:"IaaC Simplified: Amazon EC2 Deployments with GitHub Actions, Terraform, Docker & Amazon ECR",description:"The ultimate step-by-step guide to cost-effective, build-time-efficient, and easy managable EC2 deployments using GitHub Actions, Terraform, Docker, and a Amazon ECR registry.",date:"2025-02-19T00:00:00.000Z",tags:[{inline:!1,label:"AWS",permalink:"/blog/tags/aws",description:"Amazon Web Services (AWS) is a cloud computing platform that provides a wide range of services for building and deploying applications."},{inline:!1,label:"Terraform",permalink:"/blog/tags/terraform",description:"Terraform is an open-source infrastructure as code software tool created by HashiCorp that enables users to define and provision data center infrastructure using a declarative configuration language."},{inline:!1,label:"GitHub Actions",permalink:"/blog/tags/github-actions",description:"GitHub Actions is a continuous integration and continuous deployment (CI/CD) service provided by GitHub that allows you to automate your software development workflows."}],readingTime:20.305,hasTruncateMarker:!0,authors:[{name:"Ivan Borshchov",title:"Maintainer of AdminForth",url:"https://github.com/ivictbor",imageURL:"https://avatars.githubusercontent.com/u/1838656?v=4",key:"ivanb"}],frontMatter:{slug:"compose-aws-ec2-ecr-terraform-github-actions",title:"IaaC Simplified: Amazon EC2 Deployments with GitHub Actions, Terraform, Docker & Amazon ECR",authors:"ivanb",tags:["aws","terraform","github-actions"],description:"The ultimate step-by-step guide to cost-effective, build-time-efficient, and easy managable EC2 deployments using GitHub Actions, Terraform, Docker, and a Amazon ECR registry.",image:"/ogs/ga-tf-ecr.jpg"},unlisted:!1,prevItem:{title:"Setup AdminForth Authorization via Keycloak",permalink:"/blog/keycloak-setup-example"},nextItem:{title:"Amazon EC2 Deployments with GitHub Actions, Terraform, Docker & Self-hosted Registry",permalink:"/blog/compose-ec2-deployment-github-actions-registry"}},c={authorsImageUrls:[void 0]},l=[];function d(e){const t={code:"code",img:"img",li:"li",p:"p",ul:"ul",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"alt text",src:i(98341).A+"",width:"1200",height:"630"})}),"\n",(0,o.jsx)(t.p,{children:"This guide shows how to deploy own Docker apps (with AdminForth as example) to Amazon EC2 instance with Docker and Terraform involving pushing images into Amazon ECR."}),"\n",(0,o.jsx)(t.p,{children:"Needed resources:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["GitHub actions Free plan which includes 2000 minutes per month (1000 of 2-minute builds per month - more then enough for many projects, if you are not running tests). Extra builds would cost ",(0,o.jsx)(t.code,{children:"0.008$"})," per minute."]}),"\n",(0,o.jsxs)(t.li,{children:["AWS account where we will auto-spawn EC2 instance. We will use ",(0,o.jsx)(t.code,{children:"t3a.small"})," instance (2 vCPUs, 2GB RAM) which costs ",(0,o.jsx)(t.code,{children:"~14$"})," per month in ",(0,o.jsx)(t.code,{children:"us-east-1"})," region (cheapest region). Also it will take ",(0,o.jsx)(t.code,{children:"$2"})," per month for EBS gp2 storage (20GB) for EC2 instance."]}),"\n",(0,o.jsxs)(t.li,{children:["Also AWS ECR will charge for ",(0,o.jsx)(t.code,{children:"$0.09"})," per GB of data egress traffic (from EC2 to the internet) - this needed to load docker build cache."]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"The setup shape:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Build is done using IaaC approach with HashiCorp Terraform, so almoast no manual actions are needed from you. Every resource including EC2 server instance is described in code which is commited to repo."}),"\n",(0,o.jsx)(t.li,{children:"Docker build process is done on GitHub actions server, so EC2 server is not overloaded with builds"}),"\n",(0,o.jsx)(t.li,{children:"Changes in infrastructure including changing server type, adding S3 Bucket, changing size of sever disk is also can be done by commiting code to repo."}),"\n",(0,o.jsx)(t.li,{children:"Docker images and build cache are stored on Amazon ECR"}),"\n",(0,o.jsx)(t.li,{children:"Total build time for average commit to AdminForth app (with Vite rebuilds) is around 2 minutes."}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},98341:(e,t,i)=>{i.d(t,{A:()=>o});const o=i.p+"assets/images/ga-tf-ecr-87ced7681bcc3685f507cc9252bc0ffe.jpg"},28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>a});var o=i(96540);const n={},r=o.createContext(n);function s(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);