"use strict";(self.webpackChunkadminforth=self.webpackChunkadminforth||[]).push([[9637],{2894:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var i=e(4848),o=e(8453);const a={},r="Two-Factor Authentication Plugin",s={id:"tutorial/Plugins/TwoFactorsAuth",title:"Two-Factor Authentication Plugin",description:"The Two-Factor Authentication Plugin provides an additional layer of security to the application by requiring users to provide a second form of authentication in addition to their password. This plugin supports  authenticator apps.",source:"@site/docs/tutorial/Plugins/02-TwoFactorsAuth.md",sourceDirName:"tutorial/Plugins",slug:"/tutorial/Plugins/TwoFactorsAuth",permalink:"/docs/tutorial/Plugins/TwoFactorsAuth",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"AuditLog",permalink:"/docs/tutorial/Plugins/AuditLog"},next:{title:"ForeignInlineList",permalink:"/docs/tutorial/Plugins/ForeignInlineList"}},d={},c=[{value:"Installation",id:"installation",level:2}];function u(n){const t={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"two-factor-authentication-plugin",children:"Two-Factor Authentication Plugin"}),"\n",(0,i.jsx)(t.p,{children:"The Two-Factor Authentication Plugin provides an additional layer of security to the application by requiring users to provide a second form of authentication in addition to their password. This plugin supports  authenticator apps."}),"\n",(0,i.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"npm i @adminforth/two-factors-auth --save\n"})}),"\n",(0,i.jsx)(t.p,{children:"Plugin is already installed into adminforth, to import:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"import TwoFactorsAuthPlugin from '@adminforth/two-factors-auth';\n"})}),"\n",(0,i.jsx)(t.p,{children:"Plugin required some additional setup, to make it work properly. It should be added to the resource auth resource. In our example we will add it to the user resource ."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",metastring:"title='./index.ts'",children:"\nexport const admin = new AdminForth({\n    //... other resource configurations\n    auth: {\n        resourceId: 'users'\n        //... other resource configurations\n    },\n    dataSource: 'maindb',\n    table: 'users',\n//diff-add\n    plugins: [\n//diff-add\n        new TwoFactorsAuthPlugin ({ twoFaSecretFieldName: 'secret2fa' }),\n//diff-add\n    ],\n    columns: [\n        ...\n//diff-add\n        {\n//diff-add\n            name: 'secret2fa',\n//diff-add\n            showIn: [],\n//diff-add\n            backendOnly: true,\n//diff-add\n        }\n    ],\n}\n\n//diff-add\nasync function initDataBase() {\n  ...\n//diff-add\n  // check column secret2fa in apartments table\n//diff-add\n  const columns = await db.prepare('PRAGMA table_info(users);').all();\n//diff-add\n  const columnExists = columns.some((c) => c.name === 'secret2fa');\n//diff-add\n  if (!columnExists) {\n//diff-add\n    await db.prepare('ALTER TABLE users ADD COLUMN secret2fa VARCHAR(255);').run();\n//diff-add\n  }\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"Thats it! Two-Factor Authentication is now enabled\n< Please add screnshots of the 2FA setup and login page here >"})]})}function l(n={}){const{wrapper:t}={...(0,o.R)(),...n.components};return t?(0,i.jsx)(t,{...n,children:(0,i.jsx)(u,{...n})}):u(n)}},8453:(n,t,e)=>{e.d(t,{R:()=>r,x:()=>s});var i=e(6540);const o={},a=i.createContext(o);function r(n){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof n?n(t):{...t,...n}}),[t,n])}function s(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:r(n.components),i.createElement(a.Provider,{value:t},n.children)}}}]);