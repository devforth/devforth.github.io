"use strict";(self.webpackChunkadminforth=self.webpackChunkadminforth||[]).push([[1768],{76034:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"tutorial/Customization/pageInjections","title":"Page Injections","description":"In addition to ability to create custom pages and overwrite how fields are rendered, you can also inject custom components in standard AdminForth page.","source":"@site/docs/tutorial/03-Customization/08-pageInjections.md","sourceDirName":"tutorial/03-Customization","slug":"/tutorial/Customization/pageInjections","permalink":"/docs/tutorial/Customization/pageInjections","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":8,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Alerts and confirmations","permalink":"/docs/tutorial/Customization/alert"},"next":{"title":"Actions","permalink":"/docs/tutorial/Customization/Actions"}}');var s=t(74848),i=t(28453);const r={},a="Page Injections",c={},l=[{value:"Login page customization",id:"login-page-customization",level:2},{value:"List view page injections shrinking: thin enough to shrink?",id:"list-view-page-injections-shrinking-thin-enough-to-shrink",level:2},{value:"Three dots menu customization",id:"three-dots-menu-customization",level:2},{value:"List table custom action icons",id:"list-table-custom-action-icons",level:2},{value:"List table beforeActionButtons",id:"list-table-beforeactionbuttons",level:2},{value:"List table custom",id:"list-table-custom",level:2},{value:"Create/Edit custom Save button",id:"createedit-custom-save-button",level:2},{value:"Global Injections",id:"global-injections",level:2},{value:"Sidebar Top Injection",id:"sidebar-top-injection",level:2},{value:"Injection order",id:"injection-order",level:2},{value:"Order of components inserted by plugins",id:"order-of-components-inserted-by-plugins",level:2},{value:"Custom scripts in head",id:"custom-scripts-in-head",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"page-injections",children:"Page Injections"})}),"\n",(0,s.jsx)(n.p,{children:"In addition to ability to create custom pages and overwrite how fields are rendered, you can also inject custom components in standard AdminForth page."}),"\n",(0,s.jsxs)(n.p,{children:["For example let's add a custom pie chart to the ",(0,s.jsx)(n.code,{children:"list"})," page of the ",(0,s.jsx)(n.code,{children:"aparts"})," resource. Pie chart will show the distribution of the rooms count and more over will allow to filter the list by the rooms count."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="./resources/apartments.ts"',children:"{\n  resourceId: 'aparts',\n  ...\n//diff-add\n  options: {\n//diff-add\n    pageInjections: {\n//diff-add\n      list: {\n//diff-add\n        afterBreadcrumbs: '@@/ApartsPie.vue',\n//diff-add\n      }\n//diff-add\n    }   \n//diff-add\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now create file ",(0,s.jsx)(n.code,{children:"ApartsPie.vue"})," in the ",(0,s.jsx)(n.code,{children:"custom"})," folder of your project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="./custom/ApartsPie.vue"',children:"<template>\n    <div class=\"max-w-sm w-full bg-white rounded-lg shadow dark:bg-gray-800 p-4 md:p-4 mb-5\">\n      <PieChart\n        v-if=\"data.length\"\n        :data=\"rooms\" \n        :options=\"{\n          chart: {\n            height: 250,\n            events: {\n              dataPointSelection: function (event, chartContext, config) {\n                if (config.selectedDataPoints[0].length) {\n                  const selectedRoomsCount = data[config.dataPointIndex].rooms;\n                  adminforth.list.updateFilter({field: 'number_of_rooms', operator: 'eq', value: selectedRoomsCount});\n                } else {\n                  // clear filter\n                  adminforth.list.updateFilter({field: 'number_of_rooms', value: undefined});\n                }\n              }\n            }\n          },\n          dataLabels: {\n            enabled: true,\n          },\n          plotOptions: {\n            pie: {\n              dataLabels: {\n                offset: -10,\n                minAngleToShowLabel: 10,\n              },\n              expandOnClick: true,\n            },\n          },\n        }\"\n      />\n      <div v-else>Loading...</div>\n    </div>\n  </template>\n  \n  \n  <script setup lang=\"ts\">\n  import { onMounted, ref, Ref, computed } from 'vue';\n  import { PieChart } from '@/afcl';\n  import { callApi } from '@/utils';\n  import adminforth from '@/adminforth';\n  \n  \n  const data: Ref<any[]> = ref([]);\n\n\n  const COLORS = [\"#4E79A7\", \"#F28E2B\", \"#E15759\", \"#76B7B2\", \"#59A14F\"]\n  const rooms = computed(() => {\n    return data.value?.map(\n      (item, i) => ({\n        label: item.rooms + ' rooms',\n        amount: item.percentage,\n        color: COLORS[i],\n      })\n    );\n  });\n\n  onMounted(async () => {\n    try {\n    data.value = await callApi({ path: '/api/aparts-by-room-percentages', method: 'GET' });\n    } catch (error) {\n      adminforth.alert({\n        message: `Error fetching data: ${error.message}`,\n        variant: 'danger',\n        timeout: 'unlimited'\n      });\n      return;\n    }\n  })\n  \n  <\/script>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Also we have to add an Api to get percentages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="./index.ts"',children:"import type { IAdminUserExpressRequest } from 'adminforth';\nimport express from 'express';\n\n....\n\n  app.get(`${ADMIN_BASE_URL}/api/aparts-by-room-percentages/`,\n    admin.express.authorize(\n      async (req: IAdminUserExpressRequest, res: express.Response) => {\n        const roomPercentages = await admin.resource('aparts').dataConnector.client.prepare(\n          `SELECT \n            number_of_rooms, \n            COUNT(*) as count \n          FROM apartments \n          GROUP BY number_of_rooms\n          ORDER BY number_of_rooms;\n          `\n        ).all()\n        \n\n        const totalAparts = roomPercentages.reduce((acc, { count }) => acc + count, 0);\n\n        res.json(\n          roomPercentages.map(\n            ({ number_of_rooms, count }) => ({\n              rooms: number_of_rooms,\n              percentage: Math.round(count / totalAparts * 100),\n            })\n          )\n        );\n      }\n    )\n  );\n\n  // serve after you added all api\n  admin.discoverDatabases();\n  admin.express.serve(app)\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u261d\ufe0f Please note that we are using ",(0,s.jsx)(n.a,{href:"/docs/api/FrontendAPI/interfaces/FrontendAPIInterface/",children:"Frontend API"})," ",(0,s.jsx)(n.code,{children:"adminforth.list.updateFilter({field: 'number_of_rooms', operator: 'eq', value: selectedRoomsCount});"})," to set filter when we are located on apartments list page"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Here is how it looks:\n",(0,s.jsx)(n.img,{alt:"alt text",src:t(16715).A+"",width:"2541",height:"1315"})]}),"\n",(0,s.jsx)(n.h2,{id:"login-page-customization",children:"Login page customization"}),"\n",(0,s.jsx)(n.p,{children:"You can also inject custom components to the login page."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"loginPageInjections.underInputs"})," and ",(0,s.jsx)(n.code,{children:"loginPageInjections.panelHeader"})," allows to add one or more panels under or over the login form inputs:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"login Page Injections underInputs",src:t(19505).A+"",width:"2362",height:"1293"})}),"\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/index.ts"',children:"\nnew AdminForth({\n  ...\n  customization: {\n    loginPageInjections: {\n      underInputs: '@@/CustomLoginFooter.vue',\n    }\n    ...\n  }\n\n  ...\n})\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now create file ",(0,s.jsx)(n.code,{children:"CustomLoginFooter.vue"})," in the ",(0,s.jsx)(n.code,{children:"custom"})," folder of your project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="./custom/CustomLoginFooter.vue"',children:'<template>\n  <div class="text-center text-gray-500 text-sm mt-4">\n    {{$t(\'By logging in, you agree to our\')}} <a href="#" class="text-blue-500">{{$t(\'Terms of Service\')}}</a> {{$t(\'and\')}} <a href="#" class="text-blue-500">{{$t(\'Privacy Policy\')}}</a>\n  </div>\n</template>\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Also you can add ",(0,s.jsx)(n.code,{children:"panelHeader"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/index.ts"',children:"\nnew AdminForth({\n  ...\n  customization: {\n    loginPageInjections: {\n      underInputs: '@@/CustomLoginFooter.vue',\n//diff-add\n      panelHeader: '@@/CustomLoginHeader.vue',\n    }\n    ...\n  }\n\n  ...\n})\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now create file ",(0,s.jsx)(n.code,{children:"CustomLoginHeader.vue"})," in the ",(0,s.jsx)(n.code,{children:"custom"})," folder of your project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="./custom/CustomLoginHeader.vue"',children:'<template>\n    <div class="flex items-center justify-center gap-2">\n        <div class="text-2xl text-black dark:text-white font-bold">\n          AdminForth\n        </div>\n    </div>\n</template>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"list-view-page-injections-shrinking-thin-enough-to-shrink",children:"List view page injections shrinking: thin enough to shrink?"}),"\n",(0,s.jsxs)(n.p,{children:["When none of ",(0,s.jsx)(n.code,{children:"bottom"}),", ",(0,s.jsx)(n.code,{children:"beforeBreadcrumbs"}),", ",(0,s.jsx)(n.code,{children:"beforeActionButtons"}),", ",(0,s.jsx)(n.code,{children:"afterBreadcrumbs"})," injections are set in list table, the table tries to shrink into viewport for better UX. In other words, in this default mode it moves scroll from body to the table itself:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(94385).A+"",width:"3700",height:"2348"})}),"\n",(0,s.jsx)(n.p,{children:"However if one of the above injections is set, the table will not try to shrink it's height into viewport and will have a fixed height. We apply this behavior because generally page injection might take a lot of height and table risks to be too small to be usable. So vertical scroll is moved to the body (horizontal scroll is still on the table):"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(81795).A+"",width:"3700",height:"2348"})}),"\n",(0,s.jsxs)(n.p,{children:["However, if you intend to use injection as a small panel, you can set ",(0,s.jsx)(n.code,{children:"meta.thinEnoughToShrinkTable"})," to ",(0,s.jsx)(n.code,{children:"true"})," in the injection instantiation:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/apartments.ts"',children:"{\n  resourceId: 'aparts',\n  ...\n  options: {\n    pageInjections: {\n      list: {\n        bottom: {\n          file: '@@/<ComponentForBottomPanel>.vue',\n          meta: {\n            thinEnoughToShrinkTable: true,\n          }\n        }\n      }\n    }\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(64077).A+"",width:"3700",height:"2348"})}),"\n",(0,s.jsxs)(n.p,{children:["If at least one injection will not set or will not define ",(0,s.jsx)(n.code,{children:"meta.thinEnoughToShrinkTable"})," as ",(0,s.jsx)(n.code,{children:"true"}),", the table will not try to shrink into viewport."]}),"\n",(0,s.jsx)(n.h2,{id:"three-dots-menu-customization",children:"Three dots menu customization"}),"\n",(0,s.jsx)(n.p,{children:"You can also inject custom components to the three dots menu on the top right corner of the page."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(17139).A+"",width:"3700",height:"2348"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/apartments.ts"',children:"{\n  resourceId: 'aparts',\n  ...\n  options: {\n    pageInjections: {\n      show: {\n          threeDotsDropdownItems: [\n            '@@/CheckReadingTime.vue',\n          ]\n      }\n    }\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now create file ",(0,s.jsx)(n.code,{children:"CheckReadingTime.vue"})," in the ",(0,s.jsx)(n.code,{children:"custom"})," folder of your project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="./custom/CheckReadingTime.vue"',children:'<template>\n  <div class="text-gray-500 text-sm">\n    <div class="cursor-pointer flex gap-2 items-center">\n      Check reading time\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { getReadingTime} from "text-analyzer";\nimport adminforth from \'@/adminforth\';\n\ndefineExpose({\n  click,\n});\n\nfunction checkReadingTime() {\n  const text = document.querySelector(\'[data-af-column="description"]\')?.innerText;\n  if (text) {\n    const readingTime = getReadingTime(text);\n    adminforth.alert({\n      message: `Reading time: ${readingTime.minutes} minutes`,\n      variant: \'success\',\n    });\n  }\n  adminforth.list.closeThreeDotsDropdown();\n}\n\nfunction click() {\n  checkReadingTime();\n}\n\n<\/script>\n'})}),"\n",(0,s.jsx)(n.p,{children:"For this demo we will use text-analyzer package:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd custom\nnpm i text-analyzer\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u261d\ufe0f Please note that we are using AdminForth ",(0,s.jsx)(n.a,{href:"/docs/api/FrontendAPI/interfaces/FrontendAPIInterface/",children:"Frontend API"})," ",(0,s.jsx)(n.code,{children:"adminforth.list.closeThreeDotsDropdown();"})," to close the dropdown after the item is clicked."]}),"\n"]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u261d\ufe0f Please note that the injected component might have an exposed click function as well as a defined click function, which executes the click on component logic."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"list-table-custom-action-icons",children:"List table custom action icons"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"customActionIcons"})," allows to add custom actions to the list page"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(17180).A+"",width:"3700",height:"2348"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/apartments.ts"',children:"{\n  resourceId: 'aparts',\n  ...\n  options: {\n    pageInjections: {\n      list: {\n          customActionIcons: [\n            '@@/SearchForApartmentInGoogle.vue',\n          ]\n      }\n    }\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now create file ",(0,s.jsx)(n.code,{children:"SearchForApartmentInGoogle.vue"})," in the ",(0,s.jsx)(n.code,{children:"custom"})," folder of your project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="./custom/SearchForApartmentInGoogle.vue"',children:"<template>\n    <Tooltip>\n        <a :href=\"`https://google.com?q=${record.title}`\">\n            <IconCardSearch class=\"w-5 h-5 me-2\"/>\n        </a>\n\n        <template #tooltip>\n            {{$t('Search for competitive apartments in Google')}}\n        </template>\n    </Tooltip>\n</template>\n\n<script setup lang=\"ts\">\nimport { IconCardSearch } from '@iconify-prerendered/vue-mdi';\nimport Tooltip from '@/afcl/Tooltip.vue';\nimport type { AdminForthResourceColumnCommon, AdminForthResourceCommon, AdminUser } from '@/types/Common';\n\nconst props = defineProps<{\n  column: AdminForthResourceColumnCommon;\n  record: any;\n  meta: any;\n  resource: AdminForthResourceCommon;\n  adminUser: AdminUser\n}>();\n<\/script>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Install used icon:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"cd custom\nnpm i @iconify-prerendered/vue-mdi\n"})}),"\n",(0,s.jsx)(n.h2,{id:"list-table-beforeactionbuttons",children:"List table beforeActionButtons"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"beforeActionButtons"})," allows injecting one or more compact components into the header bar of the list page, directly to the left of the default action buttons (",(0,s.jsx)(n.code,{children:"Create"}),", ",(0,s.jsx)(n.code,{children:"Filter"}),", bulk actions, three\u2011dots menu). Use it for small inputs (quick search, toggle, status chip) rather than large panels."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(61930).A+"",width:"3700",height:"2348"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/apartments.ts"',children:"{\n  resourceId: 'aparts',\n  ...\n  options: {\n    pageInjections: {\n      list: {\n        beforeActionButtons: {\n          file: '@@/UniversalQuickSearch.vue',\n          meta: {\n            thinEnoughToShrinkTable: true\n          }\n        }\n      }\n    }\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Multiple components:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"beforeActionButtons: [\n  {\n    file: '@@/UniversalQuickSearch.vue',\n    meta: { thinEnoughToShrinkTable: true }\n  },\n  {\n    file: '@@/RecordsSummary.vue',\n    meta: { thinEnoughToShrinkTable: true }\n  }\n]\n"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u261d\ufe0f Keep these components visually light; wide or tall content should use ",(0,s.jsx)(n.code,{children:"afterBreadcrumbs"})," or ",(0,s.jsx)(n.code,{children:"bottom"})," instead."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"list-table-custom",children:"List table custom"}),"\n",(0,s.jsx)(n.h2,{id:"createedit-custom-save-button",children:"Create/Edit custom Save button"}),"\n",(0,s.jsx)(n.p,{children:"You can replace the default Save button on the create and edit pages with your own Vue component."}),"\n",(0,s.jsx)(n.p,{children:"Supported locations:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"pageInjections.create.saveButton"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"pageInjections.edit.saveButton"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Example configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/resources/apartments.ts"',children:"{\n  resourceId: 'aparts',\n  ...\n  options: {\n    pageInjections: {\n      create: {\n        // String shorthand\n        saveButton: '@@/SaveBordered.vue',\n      },\n      edit: {\n        // Object form (lets you pass meta later, if needed)\n        saveButton: { file: '@@/SaveBordered.vue' },\n      }\n    }\n  }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Minimal example of a custom save button component:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-vue",metastring:'title="/custom/SaveBordered.vue"',children:'<template>\n  <button\n    class="px-4 py-2 border border-blue-500 text-blue-600 rounded hover:bg-blue-50 disabled:opacity-50"\n    :disabled="props.disabled || props.saving || !props.isValid"\n    @click="props.saveRecord()"\n  >\n    <span v-if="props.saving">{{$t(\'Saving\u2026\')}}</span>\n    <span v-else>{{$t(\'Save\')}}</span>\n  </button>\n  \n</template>\n\n<script setup lang="ts">\nconst props = defineProps<{\n  record: any\n  resource: any\n  adminUser: any\n  meta: any\n  saving: boolean\n  validating: boolean\n  isValid: boolean\n  disabled: boolean\n  saveRecord: () => Promise<void>\n}>();\n<\/script>\n'})}),"\n",(0,s.jsx)(n.p,{children:"Notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Your component fully replaces the default Save button in the page header."}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"saveRecord()"})," prop triggers the standard AdminForth save flow. Call it on click."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"saving"}),", ",(0,s.jsx)(n.code,{children:"validating"}),", ",(0,s.jsx)(n.code,{children:"isValid"}),", and ",(0,s.jsx)(n.code,{children:"disabled"})," reflect the current form state."]}),"\n",(0,s.jsxs)(n.li,{children:["If no ",(0,s.jsx)(n.code,{children:"saveButton"})," is provided, the default button is shown."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Scaffolding via CLI: you can generate a ready-to-wire component and auto-update the resource config using the interactive command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"adminforth component\n# Choose: CRUD page injections \u2192 (create|edit) \u2192 Save button\n"})}),"\n",(0,s.jsx)(n.h2,{id:"global-injections",children:"Global Injections"}),"\n",(0,s.jsx)(n.p,{children:"You have opportunity to inject custom components to the global layout. For example, you can add a custom items into user menu"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"config.customization.globalInjections.userMenu"}),":"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(10913).A+"",width:"3700",height:"2348"})}),"\n",(0,s.jsxs)(n.p,{children:["use ",(0,s.jsx)(n.code,{children:"adminforth.closeUserMenuDropdown();"})," to close the dropdown after the item is clicked."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/index.ts"',children:"{\n  ...\n  customization: {\n    globalInjections: {\n      userMenu: [\n        '@@/CustomUserMenuItem.vue',\n      ]\n    }\n  }\n  ...\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now create file ",(0,s.jsx)(n.code,{children:"CustomUserMenuItem.vue"})," in the ",(0,s.jsx)(n.code,{children:"custom"})," folder of your project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="./custom/CustomUserMenuItem.vue"',children:"<template>\n  <div @click=\"openCustomPage\" class=\"cursor-pointer flex px-4 py-2 text-sm flex items-center\">\n    Custom Page\n  </div>\n</template>\n\n<script setup>\nimport adminforth from '@/adminforth';\n\nfunction openCustomPage() {\n  adminforth.alert({\n    message: 'Custom page is opened',\n    variant: 'success',\n  });\n  adminforth.closeUserMenuDropdown();\n}\n<\/script>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Also there are:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"config.customization.globalInjections.header"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"config.customization.globalInjections.sidebar"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"config.customization.globalInjections.sidebarTop"})," \u2014 renders inline at the very top of the sidebar, on the same row with the logo/brand name. If the logo is hidden via ",(0,s.jsx)(n.code,{children:"showBrandLogoInSidebar: false"}),", this area expands to the whole row width."]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"config.customization.globalInjections.everyPageBottom"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Unlike ",(0,s.jsx)(n.code,{children:"userMenu"}),", ",(0,s.jsx)(n.code,{children:"header"})," and ",(0,s.jsx)(n.code,{children:"sidebar"})," injections, ",(0,s.jsx)(n.code,{children:"everyPageBottom"})," will be added to the bottom of every page even when user is not logged in.\nYou can use it to execute some piece of code when any page is loaded. For example, you can add welcoming pop up when user visits a page."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/index.ts"',children:"{\n  ...\n  customization: {\n    globalInjections: {\n      userMenu: [\n        '@@/CustomUserMenuItem.vue',\n//diff-remove\n      ]\n//diff-add\n      ],\n//diff-add\n      everyPageBottom: [\n//diff-add\n        '@@/AnyPageWelcome.vue',\n//diff-add\n      ]\n    }\n  }\n  ...\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Now create file ",(0,s.jsx)(n.code,{children:"AnyPageWelcome.vue"})," in the ",(0,s.jsx)(n.code,{children:"custom"})," folder of your project:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",metastring:'title="./custom/AnyPageWelcome.vue"',children:"<template></template>\n\n<script setup>\nimport { onMounted } from 'vue';\nimport adminforth from '@/adminforth';\nonMounted(() => {\n  adminforth.alert({\n    message: 'Welcome!',\n    variant: 'success',\n  });\n});\n<\/script>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"sidebar-top-injection",children:"Sidebar Top Injection"}),"\n",(0,s.jsx)(n.p,{children:"You can place compact controls on the very top line of the sidebar, next to the logo/brand name:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/index.ts"',children:"new AdminForth({\n  ...\n  customization: {\n    globalInjections: {\n      sidebarTop: [\n        '@@/QuickSwitch.vue',\n      ],\n    }\n  }\n})\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If you hide the logo with ",(0,s.jsx)(n.code,{children:"showBrandLogoInSidebar: false"}),", components injected via ",(0,s.jsx)(n.code,{children:"sidebarTop"})," will take the whole line width."]}),"\n",(0,s.jsx)(n.h2,{id:"injection-order",children:"Injection order"}),"\n",(0,s.jsxs)(n.p,{children:["Most of injections accept an array of components. By defult the order of components is the same as in the array. You can use standard array methods e.g. ",(0,s.jsx)(n.code,{children:"push"}),", ",(0,s.jsx)(n.code,{children:"unshift"}),", ",(0,s.jsx)(n.code,{children:"splice"})," to put item in desired place."]}),"\n",(0,s.jsxs)(n.p,{children:["However, if you want to control the order of injections dynamically, which is very handly for plugins, you can use ",(0,s.jsx)(n.code,{children:"meta.afOrder"})," property in the injection instantiation. The higher the number, the earlier the component will be rendered. For example"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/index.ts"',children:"{\n  ...\n  customization: {\n    globalInjections: {\n      userMenu: [\n        {\n          file: '@@/CustomUserMenuItem.vue',\n          meta: { afOrder: 10 }\n        },\n        {\n          file: '@@/AnotherCustomUserMenuItem.vue',\n          meta: { afOrder: 20 }\n        },\n        {\n          file: '@@/LastCustomUserMenuItem.vue',\n          meta: { afOrder: 5 }\n        },\n      ]\n    }\n  }\n  ...\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"order-of-components-inserted-by-plugins",children:"Order of components inserted by plugins"}),"\n",(0,s.jsxs)(n.p,{children:["For plugins, the plugin developers encouraged to use ",(0,s.jsx)(n.code,{children:"meta.afOrder"})," to control the order of injections and allow to pass it from plugin options."]}),"\n",(0,s.jsxs)(n.p,{children:['For example "OAuth2 plugin", when registers a login button component for login page injection, uses ',(0,s.jsx)(n.code,{children:"meta.afOrder"})," and sets it equal to 'YYY' passed in plugin options:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:'title="/index.ts"',children:"// plugin CODE\nadminforth.config.customization.loginPageInjections.underLoginButton.push({\n    file: '@@/..vue',\n    meta: {\n      afOrder: this.pluginOptions.YYY || 0\n    }\n })\n"})}),"\n",(0,s.jsxs)(n.p,{children:["So you can just pass ",(0,s.jsx)(n.code,{children:"YYY"})," option to the plugin to control the order of the injection."]}),"\n",(0,s.jsx)(n.h2,{id:"custom-scripts-in-head",children:"Custom scripts in head"}),"\n",(0,s.jsx)(n.p,{children:"If you want to inject tags in your html head:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",metastring:"title='./index.ts'",children:"\ncustomization: {\n  ...\n  customHeadItems: [\n    {\n      tagName: 'script',\n      attributes: { async: 'true', defer: 'true' },\n      innerCode: \"console.log('Hello from HTML head')\"\n    }\n  ],\n...\n}\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},94385:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/Group 15-8c64cba7036eb1531e06f1eafd0e1512.png"},81795:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/Group 17-fad9ca14c809d54bf230427a83660706.png"},64077:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/Group 19-0fe332102e0a7d77f9b1ae934c5a8099.png"},17180:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/Group 3-44b6f2a38b402f3823bfa05fe80c8faa.png"},17139:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/Group 4-2af3c4b75ad2094995919f1d80af2b17.png"},61930:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/Group 5-466dd67529da017e36b4b50b0b103135.png"},10913:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/Group 6-892bd4a529ba37f695ef89f1e16135e5.png"},16715:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/Page Injections-e83aebce2f7a171a638d09c3c29606ce.png"},19505:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/loginPageInjection-8d19e0fb144a9386da9ddfca5cdc9463.png"},28453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>a});var o=t(96540);const s={},i=o.createContext(s);function r(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);