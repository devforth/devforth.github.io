"use strict";(self.webpackChunkadminforth=self.webpackChunkadminforth||[]).push([[5092],{2052:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"tutorial/Plugins/ForeignInlineList","title":"ForeignInlineList","description":"Foreign inline list plugin allows to display a list (table) of items from a foreign table in the show view.","source":"@site/docs/tutorial/07-Plugins/03-ForeignInlineList.md","sourceDirName":"tutorial/07-Plugins","slug":"/tutorial/Plugins/ForeignInlineList","permalink":"/docs/tutorial/Plugins/ForeignInlineList","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Two-Factor Authentication Plugin","permalink":"/docs/tutorial/Plugins/TwoFactorsAuth"},"next":{"title":"Rich editor","permalink":"/docs/tutorial/Plugins/RichEditor"}}');var o=r(74848),t=r(28453);const s={},d=void 0,a={},l=[{value:"Usage",id:"usage",level:2},{value:"Default filters",id:"default-filters",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Foreign inline list plugin allows to display a list (table) of items from a foreign table in the show view."}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.p,{children:"Import plugin:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm i @adminforth/foreign-inline-list --save\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="./resources/adminuser.ts"',children:"import ForeignInlineListPlugin from '@adminforth/foreign-inline-list';\nimport { AdminForthResource, AdminForthResourceColumn } from 'adminforth';\n"})}),"\n",(0,o.jsxs)(n.p,{children:["In ",(0,o.jsx)(n.a,{href:"/docs/tutorial/gettingStarted",children:"Getting Started"})," we created a ",(0,o.jsx)(n.code,{children:"'aparts'"})," resource which has a field ",(0,o.jsx)(n.code,{children:"'realtor_id'"}),".\nThis field refers to record from ",(0,o.jsx)(n.code,{children:"'adminuser'"})," resource. To remind you, we configured this relation using ",(0,o.jsx)(n.code,{children:"foreignResource"})," setting in the column configuration:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",metastring:'title="./resources/apartments.ts"',children:"// \nexport default {\n  resourceId: 'aparts',\n  ...\n  columns: [\n    ...\n    {\n      name: 'realtor_id',\n      foreignResource: {\n        resourceId: 'adminuser',  // this means that aparts.realtor_id refers to primary key of 'adminuser' resource\n                              // this is Many-To-One relatin: many aparts can refer to one user\n      }\n    }\n  ],\n}\n"})}),"\n",(0,o.jsx)(n.p,{children:"This means that we can display a list of apartments in the user's show view."}),"\n",(0,o.jsxs)(n.p,{children:["Add to your ",(0,o.jsx)(n.code,{children:"'adminuser'"})," resource configuration the plugin instance:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="./resources/adminuser.ts"',children:"{ \n    ...\n    resourceId: 'adminuser',\n    ...\n//diff-add\n    plugins: [\n//diff-add\n      new ForeignInlineListPlugin({\n//diff-add\n        foreignResourceId: 'aparts',\n//diff-add\n        modifyTableResourceConfig: (resourceConfig: AdminForthResource) => {\n//diff-add\n          // hide column 'square_meter' from both 'list' and 'filter'\n//diff-add\n          const column = resourceConfig.columns.find((c: AdminForthResourceColumn) => c.name === 'square_meter')!.showIn = { all: false };\n//diff-add\n          resourceConfig.options!.listPageSize = 1;\n//diff-add\n          // feel free to console.log and edit resourceConfig as you need\n//diff-add\n        },\n//diff-add\n      }),\n//diff-add\n    ],\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["You can use the ",(0,o.jsx)(n.code,{children:"modifyTableResourceConfig"})," callback to modify which columns to show in the list and filter of the foreign table."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"alt text",src:r(81946).A+"",width:"3700",height:"2044"})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["\ud83d\udc46 To make plugin work, the specified resource (defined with ",(0,o.jsx)(n.code,{children:"foreignResourceId"}),") should have one (and only one) column that refers to the current resource on which you add a plugin.\nIn our case we add plugin to ",(0,o.jsx)(n.code,{children:"adminuser"})," resource, so the ",(0,o.jsx)(n.code,{children:"aparts"})," resource should have one column with ",(0,o.jsx)(n.code,{children:"foreignResource.resourceId"})," equal to ",(0,o.jsx)(n.code,{children:"adminuser"})," resourceId."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"default-filters",children:"Default filters"}),"\n",(0,o.jsx)(n.p,{children:"If you need to add default filters for the foreign resource based on your current record (for example show apartment only from Italy, when user have country Italy), you can use defaultFilters callback:"}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"\ud83d\udc46 This example won't work until you'll add counrty field in your adminuser resource and it's only for demonstrating concept of callback"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="./resources/adminuser.ts"',children:'\n  ...\n\n  new ForeignInlineListPlugin({\n\n    ...\n      //diff-add\n      defaultFilters: (record: any) => {\n        //diff-add\n        return [\n          //diff-add\n          {\n            //diff-add\n            field: "country",\n            //diff-add\n            operator: AdminForthFilterOperators.EQ,\n            //diff-add\n            value: record.country,\n            //diff-add\n          }\n          //diff-add\n        ]\n        //diff-add\n      }\n\n    ...\n\n  })\n\n  ...\n\n'})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsx)(n.p,{children:"\ud83d\udc46It also makes sense to modify the table resource and hide the country field from filters, because this value is hardcoded and equals the country from the record:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"\n  ...\n\n  new ForeignInlineListPlugin({\n\n    ...\n\n    //diff-add\n    modifyTableResourceConfig: (resourceConfig: AdminForthResource) => {\n      //diff-add\n      const column = resourceConfig.columns.find((c: AdminForthResourceColumn) => c.name === 'country')!.showIn = {\n        //diff-add\n        list: true,\n        //diff-add\n        show: true,\n        //diff-add\n        edit: true,\n        //diff-add\n        create: true,\n        //diff-add\n        filter: false\n        //diff-add\n      };\n      //diff-add\n    },\n\n    defaultFilters: (record: any) => {\n      return [\n        {\n          field: \"country\",\n          operator: AdminForthFilterOperators.EQ,\n          value: record.country,\n        }\n      ]\n    }\n\n    ...\n\n  })\n\n  ...\n  \n"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},81946:(e,n,r)=>{r.d(n,{A:()=>i});const i=r.p+"assets/images/ForeignInlineList-c1a0e3a31c3b8942866b0dad7bd668fd.png"},28453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>d});var i=r(96540);const o={},t=i.createContext(o);function s(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);