"use strict";(self.webpackChunkadminforth=self.webpackChunkadminforth||[]).push([[8296],{26787:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>r});var i=t(74848),a=t(28453);const s={slug:"keycloak-setup-example",title:"Setup AdminForth Authorization via Keycloak",authors:"mpipkun",tags:["keycloak","authentication"],description:"The ultimate guide to setting up AdminForth authorization via Keycloak"},c=void 0,o={permalink:"/blog/keycloak-setup-example",source:"@site/blog/2025-03-25-keycloack/index.md",title:"Setup AdminForth Authorization via Keycloak",description:"The ultimate guide to setting up AdminForth authorization via Keycloak",date:"2025-03-25T00:00:00.000Z",tags:[{inline:!1,label:"Keycloak",permalink:"/blog/tags/keycloak",description:"Keycloak is an open-source identity and access management solution for modern applications and services."},{inline:!1,label:"Auth",permalink:"/blog/tags/auth",description:"Authentication is the process of verifying the identity of a user or system. Authentication is a critical component of security in software applications and systems."}],readingTime:1.995,hasTruncateMarker:!0,authors:[{name:"Maxim Pypkun",title:"Developer of AdminForth",url:"https://github.com/NoOne7135",imageURL:"https://avatars.githubusercontent.com/u/120279695?v=4",key:"mpipkun"}],frontMatter:{slug:"keycloak-setup-example",title:"Setup AdminForth Authorization via Keycloak",authors:"mpipkun",tags:["keycloak","authentication"],description:"The ultimate guide to setting up AdminForth authorization via Keycloak"},unlisted:!1,prevItem:{title:"How to translate dynamic strings in AdminForth API",permalink:"/blog/dynamic-strings-translation"},nextItem:{title:"IaaC Simplified: Amazon EC2 Deployments with GitHub Actions, Terraform, Docker & Amazon ECR",permalink:"/blog/compose-aws-ec2-ecr-terraform-github-actions"}},l={authorsImageUrls:[void 0]},r=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Create a Docker Compose File",id:"step-1-create-a-docker-compose-file",level:2},{value:"Step 2: Singn in to Keycloak and Create a Keycloak Realm",id:"step-2-singn-in-to-keycloak-and-create-a-keycloak-realm",level:2},{value:"Step 3: Create a Keycloak Client",id:"step-3-create-a-keycloak-client",level:2},{value:"Step 4: Create a Keycloak User",id:"step-4-create-a-keycloak-user",level:2}];function d(e){const n={code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Keycloak is an open-source identity and access management solution that provides authentication and authorization services. It can be used to secure applications and services by managing user identities, roles, and permissions."}),"\n",(0,i.jsx)(n.p,{children:"In this guide, we will walk you through the process of setting up AdminForth authorization via Keycloak. Most important we will show you how to set up Keycloak in a Docker container and configure it to work with AdminForth."}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Docker installed on your machine"}),"\n",(0,i.jsx)(n.li,{children:"Basic knowledge of Docker and Docker Compose"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-1-create-a-docker-compose-file",children:"Step 1: Create a Docker Compose File"}),"\n",(0,i.jsxs)(n.p,{children:["Create a ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file in your project directory. This file will define the Keycloak service and its configuration."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'services:\n  pg:\n    image: postgres:latest\n    environment:\n      POSTGRES_USER: demo\n      POSTGRES_PASSWORD: demo\n      POSTGRES_DB: demo\n    ports:\n      - "5432:5432"\n    volumes:\n      - pg-data:/var/lib/postgresql/data\n  keycloak:\n    image: quay.io/keycloak/keycloak:latest\n    command: start-dev\n    environment:\n      - KEYCLOAK_ADMIN=admin\n      - KEYCLOAK_ADMIN_PASSWORD=admin\n      - DB_VENDOR=postgres\n      - DB_ADDR=pg\n      - DB_DATABASE=demo\n      - DB_USER=demo\n      - DB_PASSWORD=demo\n    ports:\n      - "8080:8080"\n    depends_on:\n      - pg\n    volumes:\n      - keycloak-data:/opt/keycloak/data\n\nvolumes:\n  keycloak-data:\n'})}),"\n",(0,i.jsx)(n.p,{children:"Run service:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker compose -p af-dev-demo up -d --build --remove-orphans --wait\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-2-singn-in-to-keycloak-and-create-a-keycloak-realm",children:"Step 2: Singn in to Keycloak and Create a Keycloak Realm"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open the Keycloak UI at ",(0,i.jsx)(n.code,{children:"http://localhost:8080/"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Sign in with the credentials ",(0,i.jsx)(n.code,{children:"admin"})," and ",(0,i.jsx)(n.code,{children:"admin"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(19467).A+"",width:"1110",height:"685"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:['Select the "Realms" tab and click ',(0,i.jsx)(n.code,{children:"Create Realm"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(69556).A+"",width:"1342",height:"871"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["Enter a name for your realm and click ",(0,i.jsx)(n.code,{children:"Create"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(90685).A+"",width:"1104",height:"614"})}),"\n",(0,i.jsx)(n.h2,{id:"step-3-create-a-keycloak-client",children:"Step 3: Create a Keycloak Client"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.code,{children:"Clients"})," tab and click ",(0,i.jsx)(n.code,{children:"Create Client"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(78493).A+"",width:"1859",height:"848"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Choose ",(0,i.jsx)(n.code,{children:"OpenID Connect"}),", enter a client ID for your client and click ",(0,i.jsx)(n.code,{children:"Next"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(80847).A+"",width:"1399",height:"630"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["Swith ",(0,i.jsx)(n.code,{children:"Client authentication"})," to ",(0,i.jsx)(n.code,{children:"On"})," and click ",(0,i.jsx)(n.code,{children:"Next"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(11897).A+"",width:"1399",height:"630"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["Enter a ",(0,i.jsx)(n.code,{children:"Valid redirect URI"})," and click ",(0,i.jsx)(n.code,{children:"Save"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(20993).A+"",width:"1393",height:"481"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsxs)(n.li,{children:["In the ",(0,i.jsx)(n.code,{children:"Client details"})," go to ",(0,i.jsx)(n.code,{children:"Credentials"})," tab and copy the ",(0,i.jsx)(n.code,{children:"Client secret"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(28962).A+"",width:"1110",height:"685"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsxs)(n.li,{children:["Add the credentials to your ",(0,i.jsx)(n.code,{children:".env"})," file:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"KEYCLOAK_CLIENT_ID=your_keycloak_client_id\nKEYCLOAK_CLIENT_SECRET=your_keycloak_client_secret\nKEYCLOAK_REALM=your_keycloak_realm\nKEYCLOAK_URL=http://localhost:8080\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-4-create-a-keycloak-user",children:"Step 4: Create a Keycloak User"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.code,{children:"Users"})," tab and click ",(0,i.jsx)(n.code,{children:"Create new user"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(9478).A+"",width:"2267",height:"841"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Enter a ",(0,i.jsx)(n.code,{children:"Username"}),", ",(0,i.jsx)(n.code,{children:"Email"}),", ",(0,i.jsx)(n.code,{children:"First name"})," and ",(0,i.jsx)(n.code,{children:"Last name"})," and click ",(0,i.jsx)(n.code,{children:"Create"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(91023).A+"",width:"1081",height:"756"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["In the  ",(0,i.jsx)(n.code,{children:"User details"})," go to ",(0,i.jsx)(n.code,{children:"Credentials"})," tab and click ",(0,i.jsx)(n.code,{children:"Set password"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(19951).A+"",width:"1859",height:"848"})}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["Enter a ",(0,i.jsx)(n.code,{children:"Password"}),", turn ",(0,i.jsx)(n.code,{children:"Temporary"})," to ",(0,i.jsx)(n.code,{children:"Off"})," and click ",(0,i.jsx)(n.code,{children:"Save"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"alt text",src:t(99864).A+"",width:"592",height:"345"})}),"\n",(0,i.jsx)(n.p,{children:"Finally, you can sign in to AdminForth with your Keycloak credentials. (if user with the same email exists in AdminForth)"})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},11897:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-1-ce94235b0debb8fb2480393295b88ff9.png"},78493:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-10-10a08b7e071d3604d5164d097c20fa26.png"},19951:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-12-2065ef60cc056a3800ceb2c930ee3df0.png"},28962:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-2-15bcedc74c03e9e768fb34903fb5a97f.png"},19467:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-3-aae1be024f2b0465f343a3afd78e8705.png"},69556:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-4-2261eee7e0672de25377bad6cbb4264f.png"},90685:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-5-434b5be3b4467a6d3bb8ea980d8a49ee.png"},9478:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-6-2378b1f24c43984cf8fe3b9df6531caa.png"},91023:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-7-28621265de2379ceb2d7764a9e8caafc.png"},99864:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-8-7d2e6af907b827e7f1d362b565d6290f.png"},20993:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-9-9e90fad3645208faf3d7a89580ba2124.png"},80847:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-72c12c886ef5f1fdf13e3f69a9d786ff.png"},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>o});var i=t(96540);const a={},s=i.createContext(a);function c(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);