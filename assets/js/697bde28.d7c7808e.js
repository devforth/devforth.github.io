"use strict";(self.webpackChunkadminforth=self.webpackChunkadminforth||[]).push([[8296],{1529:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>r});var i=t(8390),s=t(4848),a=t(8453);const c={slug:"keycloak-setup-example",title:"Setup AdminForth Authorization via Keycloak",authors:"mpipkun",tags:["keycloak","authentication"],description:"The ultimate guide to setting up AdminForth authorization via Keycloak"},l=void 0,o={authorsImageUrls:[void 0]},r=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Create a Docker Compose File",id:"step-1-create-a-docker-compose-file",level:2},{value:"Step 2: Singn in to Keycloak and Create a Keycloak Realm",id:"step-2-singn-in-to-keycloak-and-create-a-keycloak-realm",level:2},{value:"Step 3: Create a Keycloak Client",id:"step-3-create-a-keycloak-client",level:2},{value:"Step 4: Create a Keycloak User",id:"step-4-create-a-keycloak-user",level:2}];function d(e){const n={code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Keycloak is an open-source identity and access management solution that provides authentication and authorization services. It can be used to secure applications and services by managing user identities, roles, and permissions."}),"\n",(0,s.jsx)(n.p,{children:"In this guide, we will walk you through the process of setting up AdminForth authorization via Keycloak. Most important we will show you how to set up Keycloak in a Docker container and configure it to work with AdminForth."}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Docker installed on your machine"}),"\n",(0,s.jsx)(n.li,{children:"Basic knowledge of Docker and Docker Compose"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"step-1-create-a-docker-compose-file",children:"Step 1: Create a Docker Compose File"}),"\n",(0,s.jsxs)(n.p,{children:["Create a ",(0,s.jsx)(n.code,{children:"docker-compose.yml"})," file in your project directory. This file will define the Keycloak service and its configuration."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'services:\n  pg:\n    image: postgres:latest\n    environment:\n      POSTGRES_USER: demo\n      POSTGRES_PASSWORD: demo\n      POSTGRES_DB: demo\n    ports:\n      - "5432:5432"\n    volumes:\n      - pg-data:/var/lib/postgresql/data\n  keycloak:\n    image: quay.io/keycloak/keycloak:latest\n    command: start-dev\n    environment:\n      - KEYCLOAK_ADMIN=admin\n      - KEYCLOAK_ADMIN_PASSWORD=admin\n      - DB_VENDOR=postgres\n      - DB_ADDR=pg\n      - DB_DATABASE=demo\n      - DB_USER=demo\n      - DB_PASSWORD=demo\n    ports:\n      - "8080:8080"\n    depends_on:\n      - pg\n    volumes:\n      - keycloak-data:/opt/keycloak/data\n\nvolumes:\n  keycloak-data:\n'})}),"\n",(0,s.jsx)(n.p,{children:"Run service:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"docker compose -p af-dev-demo up -d --build --remove-orphans --wait\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-2-singn-in-to-keycloak-and-create-a-keycloak-realm",children:"Step 2: Singn in to Keycloak and Create a Keycloak Realm"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Open the Keycloak UI at ",(0,s.jsx)(n.code,{children:"http://localhost:8080/"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Sign in with the credentials ",(0,s.jsx)(n.code,{children:"admin"})," and ",(0,s.jsx)(n.code,{children:"admin"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(2644).A+"",width:"1110",height:"685"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:['Select the "Realms" tab and click ',(0,s.jsx)(n.code,{children:"Create Realm"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(4907).A+"",width:"1342",height:"871"})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["Enter a name for your realm and click ",(0,s.jsx)(n.code,{children:"Create"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(7426).A+"",width:"1104",height:"614"})}),"\n",(0,s.jsx)(n.h2,{id:"step-3-create-a-keycloak-client",children:"Step 3: Create a Keycloak Client"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.code,{children:"Clients"})," tab and click ",(0,s.jsx)(n.code,{children:"Create Client"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(596).A+"",width:"1859",height:"848"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Choose ",(0,s.jsx)(n.code,{children:"OpenID Connect"}),", enter a client ID for your client and click ",(0,s.jsx)(n.code,{children:"Next"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(680).A+"",width:"1399",height:"630"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["Swith ",(0,s.jsx)(n.code,{children:"Client authentication"})," to ",(0,s.jsx)(n.code,{children:"On"})," and click ",(0,s.jsx)(n.code,{children:"Next"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(8886).A+"",width:"1399",height:"630"})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["Enter a ",(0,s.jsx)(n.code,{children:"Valid redirect URI"})," and click ",(0,s.jsx)(n.code,{children:"Save"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(2574).A+"",width:"1393",height:"481"})}),"\n",(0,s.jsxs)(n.ol,{start:"5",children:["\n",(0,s.jsxs)(n.li,{children:["In the ",(0,s.jsx)(n.code,{children:"Client details"})," go to ",(0,s.jsx)(n.code,{children:"Credentials"})," tab and copy the ",(0,s.jsx)(n.code,{children:"Client secret"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(3773).A+"",width:"1110",height:"685"})}),"\n",(0,s.jsxs)(n.ol,{start:"6",children:["\n",(0,s.jsxs)(n.li,{children:["Add the credentials to your ",(0,s.jsx)(n.code,{children:".env"})," file:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"KEYCLOAK_CLIENT_ID=your_keycloak_client_id\nKEYCLOAK_CLIENT_SECRET=your_keycloak_client_secret\nKEYCLOAK_REALM=your_keycloak_realm\nKEYCLOAK_URL=http://localhost:8080\n"})}),"\n",(0,s.jsx)(n.h2,{id:"step-4-create-a-keycloak-user",children:"Step 4: Create a Keycloak User"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.code,{children:"Users"})," tab and click ",(0,s.jsx)(n.code,{children:"Create new user"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(1961).A+"",width:"2267",height:"841"})}),"\n",(0,s.jsxs)(n.ol,{start:"2",children:["\n",(0,s.jsxs)(n.li,{children:["Enter a ",(0,s.jsx)(n.code,{children:"Username"}),", ",(0,s.jsx)(n.code,{children:"Email"}),", ",(0,s.jsx)(n.code,{children:"First name"})," and ",(0,s.jsx)(n.code,{children:"Last name"})," and click ",(0,s.jsx)(n.code,{children:"Create"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(5056).A+"",width:"1081",height:"756"})}),"\n",(0,s.jsxs)(n.ol,{start:"3",children:["\n",(0,s.jsxs)(n.li,{children:["In the  ",(0,s.jsx)(n.code,{children:"User details"})," go to ",(0,s.jsx)(n.code,{children:"Credentials"})," tab and click ",(0,s.jsx)(n.code,{children:"Set password"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(518).A+"",width:"1859",height:"848"})}),"\n",(0,s.jsxs)(n.ol,{start:"4",children:["\n",(0,s.jsxs)(n.li,{children:["Enter a ",(0,s.jsx)(n.code,{children:"Password"}),", turn ",(0,s.jsx)(n.code,{children:"Temporary"})," to ",(0,s.jsx)(n.code,{children:"Off"})," and click ",(0,s.jsx)(n.code,{children:"Save"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:t(5591).A+"",width:"592",height:"345"})}),"\n",(0,s.jsx)(n.p,{children:"Finally, you can sign in to AdminForth with your Keycloak credentials. (if user with the same email exists in AdminForth)"})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8886:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-1-ce94235b0debb8fb2480393295b88ff9.png"},596:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-10-10a08b7e071d3604d5164d097c20fa26.png"},518:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-12-2065ef60cc056a3800ceb2c930ee3df0.png"},3773:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-2-15bcedc74c03e9e768fb34903fb5a97f.png"},2644:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-3-aae1be024f2b0465f343a3afd78e8705.png"},4907:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-4-2261eee7e0672de25377bad6cbb4264f.png"},7426:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-5-434b5be3b4467a6d3bb8ea980d8a49ee.png"},1961:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-6-2378b1f24c43984cf8fe3b9df6531caa.png"},5056:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-7-28621265de2379ceb2d7764a9e8caafc.png"},5591:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-8-7d2e6af907b827e7f1d362b565d6290f.png"},2574:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-9-9e90fad3645208faf3d7a89580ba2124.png"},680:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/image-72c12c886ef5f1fdf13e3f69a9d786ff.png"},8453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>l});var i=t(6540);const s={},a=i.createContext(s);function c(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(a.Provider,{value:n},e.children)}},8390:e=>{e.exports=JSON.parse('{"permalink":"/blog/keycloak-setup-example","source":"@site/blog/2025-03-25-keycloack/index.md","title":"Setup AdminForth Authorization via Keycloak","description":"The ultimate guide to setting up AdminForth authorization via Keycloak","date":"2025-03-25T00:00:00.000Z","tags":[{"inline":false,"label":"Keycloak","permalink":"/blog/tags/keycloak","description":"Keycloak is an open-source identity and access management solution for modern applications and services."},{"inline":false,"label":"Auth","permalink":"/blog/tags/auth","description":"Authentication is the process of verifying the identity of a user or system. Authentication is a critical component of security in software applications and systems."}],"readingTime":1.995,"hasTruncateMarker":true,"authors":[{"name":"Maxim Pypkun","title":"Developer of AdminForth","url":"https://github.com/NoOne7135","imageURL":"https://avatars.githubusercontent.com/u/120279695?v=4","key":"mpipkun","page":null}],"frontMatter":{"slug":"keycloak-setup-example","title":"Setup AdminForth Authorization via Keycloak","authors":"mpipkun","tags":["keycloak","authentication"],"description":"The ultimate guide to setting up AdminForth authorization via Keycloak"},"unlisted":false,"prevItem":{"title":"How to translate dynamic strings in AdminForth API","permalink":"/blog/dynamic-strings-translation"},"nextItem":{"title":"Amazon EC2 Deployments with GitHub Actions, Terraform, Docker & Self-hosted Registry","permalink":"/blog/compose-ec2-deployment-github-actions-registry"}}')}}]);