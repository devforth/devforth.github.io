"use strict";(self.webpackChunkadminforth=self.webpackChunkadminforth||[]).push([[7581],{23907:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"tutorial/Plugins/universal-filters","title":"Universal Search","description":"Ephemeral, debounced multi\u2011column search for List pages. A lightweight input (injected at beforeActionButtons) sends the term with each list request; a hook expands it server\u2011side into a single OR filter group over your configured columns. The term never enters the standard filter store, so:","source":"@site/docs/tutorial/08-Plugins/18-universal-filters.md","sourceDirName":"tutorial/08-Plugins","slug":"/tutorial/Plugins/universal-filters","permalink":"/docs/tutorial/Plugins/universal-filters","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":18,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Bulk AI Flow","permalink":"/docs/tutorial/Plugins/bulk-ai-flow"},"next":{"title":"Login Captcha","permalink":"/docs/tutorial/Plugins/login-captcha"}}');var t=i(74848),s=i(28453);const l={},a="Universal Search",o={},d=[{value:"Installation",id:"installation",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Options",id:"options",level:2},{value:"Debounce Behavior",id:"debounce-behavior",level:2},{value:"How It Works Internally",id:"how-it-works-internally",level:2},{value:"Roadmap / Future Enhancements",id:"roadmap--future-enhancements",level:2},{value:"License",id:"license",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"universal-search",children:"Universal Search"})}),"\n",(0,t.jsxs)(n.p,{children:["Ephemeral, debounced multi\u2011column search for List pages. A lightweight input (injected at ",(0,t.jsx)(n.code,{children:"beforeActionButtons"}),") sends the term with each list request; a hook expands it server\u2011side into a single ",(0,t.jsx)(n.code,{children:"OR"})," filter group over your configured columns. The term never enters the standard filter store, so:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"No extra badge count"}),"\n",(0,t.jsx)(n.li,{children:"No URL pollution"}),"\n",(0,t.jsx)(n.li,{children:"No UI filter chips to manage"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Ideal for quick, multi\u2011field lookup without opening the filter panel."}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"npm i @adminforth/universal-search --save\n"})}),"\n",(0,t.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,t.jsxs)(n.p,{children:["Add the plugin to any resource. Place it inside the ",(0,t.jsx)(n.code,{children:"plugins"})," array. It injects a component at the ",(0,t.jsx)(n.code,{children:"beforeActionButtons"})," list page injection point (already available in AdminForth if you are on a recent version)."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="./resources/apartments.ts"',children:"// diff-add\nimport UniversalSearchPlugin from '@adminforth/universal-search';\n\nexport const admin = new AdminForth({\n  ...,\n  resources: [\n    {\n      resourceId: 'aparts',\n      table: 'apartments',\n      columns: [\n        { name: 'id', primaryKey: true },\n        { name: 'title' },\n        { name: 'description' },\n        { name: 'country' },\n        { name: 'price' },\n      ],\n      plugins: [\n        // diff-add\n        new UniversalSearchPlugin({\n        // diff-add\n          columns: [\n        // diff-add\n            { name: 'title' },\n        // diff-add\n            { name: 'description' },\n        // diff-add\n            { name: 'country', caseSensitive: true },\n        // diff-add\n            { name: 'price', exact: true },\n        // diff-add\n          ],\n        // diff-add\n          debounceMs: 400,          // optional (default 500)\n        // diff-add\n          placeholder: 'Search apartments\u2026' // optional (default empty string)\n        // diff-add\n        }),\n      ]\n    }\n  ]\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:"Type into the input and (after debounce) the backend receives the term (as an internal field) and the plugin hook rewrites it into a single composite filter like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "operator": "or",\n  "subFilters": [\n    { "field": "title",       "operator": "ilike", "value": "%pent%" },\n    { "field": "description", "operator": "ilike", "value": "%pent%" },\n    { "field": "country",     "operator": "like",  "value": "%pent%" }\n  ]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"price"})," (marked ",(0,t.jsx)(n.code,{children:"exact"}),") will be compared for exact match (no wildcards). Numeric heuristics may be applied in future versions (current implementation sends the same OR group regardless of numeric content \u2014 adjust logic in hook if you need number detection)."]}),"\n",(0,t.jsx)(n.p,{children:"Press Enter to apply immediately without waiting for the debounce delay. Clearing the input removes the universal filter group entirely."}),"\n",(0,t.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"new UniversalSearchPlugin({\n  columns: [\n    {\n      name: string;            // required column name\n      caseSensitive?: boolean; // default false\n      exact?: boolean;         // exact match (no wildcards)\n      searchBy?: 'valueOnly' | 'keyOnly' | 'both'  (reserved; not exposed yet in public docs)\n    }\n  ],\n  debounceMs?: number;         // default 500\n  placeholder?: string;        // input placeholder (default \"\")\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:"Notes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The virtual field name (",(0,t.jsx)(n.code,{children:"_universal_search"}),") and ephemeral behavior are fixed and not configurable."]}),"\n",(0,t.jsx)(n.li,{children:"The input does not create visible filters; clearing it removes internal search state."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"debounce-behavior",children:"Debounce Behavior"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Default delay: 500 ms (configurable via ",(0,t.jsx)(n.code,{children:"debounceMs"}),")."]}),"\n",(0,t.jsx)(n.li,{children:"Enter key: applies immediately."}),"\n",(0,t.jsx)(n.li,{children:"Input cleared: universal OR filter group removed."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"how-it-works-internally",children:"How It Works Internally"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Component writes the current term to a transient global (",(0,t.jsx)(n.code,{children:"adminforth.__universalSearchTerm"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["List request body includes ",(0,t.jsx)(n.code,{children:"__universal_search_term"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Plugin ",(0,t.jsx)(n.code,{children:"beforeDatasourceRequest"})," hook adds a temporary virtual filter."]}),"\n",(0,t.jsxs)(n.li,{children:["Hook expands that virtual filter to an ",(0,t.jsx)(n.code,{children:"OR"})," group across configured columns."]}),"\n",(0,t.jsx)(n.li,{children:"The expanded group is executed; the temporary filter is not shown in the UI."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This means the UI stays clean while the backend still receives a standard filter structure."}),"\n",(0,t.jsx)(n.h2,{id:"roadmap--future-enhancements",children:"Roadmap / Future Enhancements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Optional multi-term splitting (turn "foo bar" into two groups)'}),"\n",(0,t.jsx)(n.li,{children:"Enum label / foreign key label search exposure"}),"\n",(0,t.jsx)(n.li,{children:"Loading indicator & progress feedback"}),"\n",(0,t.jsx)(n.li,{children:"Optional persistence of the last term per resource"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,t.jsx)(n.p,{children:"MIT"})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var r=i(96540);const t={},s=r.createContext(t);function l(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);