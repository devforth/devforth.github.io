<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorial/Plugins/TwoFactorsAuth" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Two-Factor Authentication Plugin | Vue &amp; Node admin panel framework</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://adminforth.dev/img/og.jpg"><meta data-rh="true" name="twitter:image" content="https://adminforth.dev/img/og.jpg"><meta data-rh="true" property="og:url" content="https://adminforth.dev/docs/tutorial/Plugins/TwoFactorsAuth/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Two-Factor Authentication Plugin | Vue &amp; Node admin panel framework"><meta data-rh="true" name="description" content="The Two-Factor Authentication Plugin provides an additional layer of security to the application by requiring users to provide a second form of authentication in addition to their password. This plugin supports  authenticator apps."><meta data-rh="true" property="og:description" content="The Two-Factor Authentication Plugin provides an additional layer of security to the application by requiring users to provide a second form of authentication in addition to their password. This plugin supports  authenticator apps."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://adminforth.dev/docs/tutorial/Plugins/TwoFactorsAuth/"><link data-rh="true" rel="alternate" href="https://adminforth.dev/docs/tutorial/Plugins/TwoFactorsAuth/" hreflang="en"><link data-rh="true" rel="alternate" href="https://adminforth.dev/docs/tutorial/Plugins/TwoFactorsAuth/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://VSIPOF54AV-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Vue &amp; Node admin panel framework RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Vue &amp; Node admin panel framework Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7K99Q2BH04"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7K99Q2BH04",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Vue &amp; Node admin panel framework" href="/opensearch.xml">

<script src="/scripts/adminforth.js"></script><link rel="stylesheet" href="/assets/css/styles.6d3bd8a8.css">
<script src="/assets/js/runtime~main.513d7205.js" defer="defer"></script>
<script src="/assets/js/main.59214cfe.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="AdminForth Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="AdminForth Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">AdminForth</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/tutorial/gettingStarted/">Tutorial</a><a class="navbar__item navbar__link" href="/docs/api/">API</a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://demo.adminforth.dev/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Live Demo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/devforth/adminforth" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/gettingStarted/">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item hidden-sidebar"><a class="menu__link" href="/docs/tutorial/hello-world/">Hello world app without CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/glossary/">Glossary</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Customization</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/branding/">Branding and Theming</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/customFieldRendering/">Custom record field rendering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/virtualColumns/">Virtual columns</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/hooks/">Hooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/limitingAccess/">Limiting actions access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/customPages/">Custom pages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/alert/">Alerts and confirmations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/pageInjections/">Page Injections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/Actions/">Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/menuConfiguration/">Menu Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/dataApi/">Data API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/security/">Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/standardPagesTuning/">Standard pages tuning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/afcl/">AdminForth Components Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Customization/websocket/">Websocket</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/deploy/">Deploy in Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/ListOfAdapters/">AdminForth Adapters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tutorial/CLICommands/">CLI Commands</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Plugins</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/AuditLog/">AuditLog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tutorial/Plugins/TwoFactorsAuth/">Two-Factor Authentication Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/ForeignInlineList/">ForeignInlineList</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/RichEditor/">Rich editor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/upload/">Upload</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/text-complete/">Text Complete</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/email-password-reset/">Email password reset</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/import-export/">Import-Export</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/open-signup/">Open Signup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/i18n/">Internationalization (i18n)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/oauth/">OAuth Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/inline-create/">Inline Create</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/list-in-place-edit/">List in place edit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/markdown/">Markdown</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/ForeignInlineShow/">ForeignInlineShow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/email-invite/">Email Invite</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/bulk-ai-flow/">Bulk AI Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Plugins/universal-filters/">Universal Search</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Advanced</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tutorial/Advanced/plugin-development/">Plugin development guide</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Plugins</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Two-Factor Authentication Plugin</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Two-Factor Authentication Plugin</h1>
<p>The Two-Factor Authentication Plugin provides an additional layer of security to the application by requiring users to provide a second form of authentication in addition to their password. This plugin supports  authenticator apps.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation" href="/docs/tutorial/Plugins/TwoFactorsAuth/#installation">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> i @adminforth/two-factors-auth </span><span class="token parameter variable" style="color:#f8f8f2">--save</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Plugin is already installed into adminforth, to import:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">/adminuser.ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> TwoFactorsAuthPlugin </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;@adminforth/two-factors-auth&#x27;</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Plugin required some additional setup, to make it work properly. It should be added to the resource auth resource. In our example we will add it to the user resource .</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./schema.prisma</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">model adminuser </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  id            String     </span><span class="token decorator at operator" style="color:#66d9ef">@</span><span class="token decorator function" style="color:#e6db74">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  created_at    DateTime</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  email         String   </span><span class="token decorator at operator" style="color:#66d9ef">@</span><span class="token decorator function" style="color:#e6db74">unique</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  role          String</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  password_hash String</span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">  secret2fa     String</span><span class="token operator" style="color:#66d9ef">?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> run makemigration -- </span><span class="token parameter variable" style="color:#f8f8f2">--name</span><span class="token plain"> add-2fa-secret </span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> run migrate:local</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And add it to <code>adminuser.ts</code></p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    table</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;adminuser&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">    plugins</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">TwoFactorsAuthPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> twoFaSecretFieldName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;secret2fa&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> timeStepWindow</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    columns</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            name</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;secret2fa&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            showIn</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> all</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            backendOnly</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>💡 <strong>Note</strong>: Time-Step Size</p>
<p>By default, <code>timeStepWindow</code> is set to <code>1</code>, which means the Two-Factor Authentication Plugin will check the current 30-second time-step, as well as one step before and after, to validate a TOTP code. This aligns with <a href="https://www.rfc-editor.org/rfc/rfc6238" target="_blank" rel="noopener noreferrer">RFC 6238</a> best practices to accommodate slight clock drift between the server and the user&#x27;s device.</p>
<p>For example, if a code is generated between <strong>12:00:00</strong> and <strong>12:00:30</strong>, it will typically expire at <strong>12:00:30</strong>. However, with a <code>timeStepWindow</code> of <code>1</code>, the plugin will continue to accept it up to <strong>12:00:59</strong> (the “next” 30-second step), preventing users from being locked out if their device clock is a few seconds off. Once the clock hits <strong>12:01:00</strong>, that previous code will be treated as expired.</p>
<p>If you find users frequently encountering code mismatches due to clock drift, you can increase <code>timeStepWindow</code> to <code>2</code>. <strong>However, be cautious: larger windows can reduce overall security!</strong></p>
<p>❗ With a <code>timeStepWindow</code> set to <code>0</code>, the plugin will pass all the expired codes, which is not secure and should only be used for testing purposes.</p>
</blockquote>
<p>Thats it! Two-Factor Authentication is now enabled:
<img decoding="async" loading="lazy" alt="alt text" src="/assets/images/image-1-1aa4ed0aa37a198c7c9e14c981db42dd.png" width="3700" height="1932" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="disabling-two-factor-authentication-locally">Disabling Two-Factor Authentication locally<a class="hash-link" aria-label="Direct link to Disabling Two-Factor Authentication locally" title="Direct link to Disabling Two-Factor Authentication locally" href="/docs/tutorial/Plugins/TwoFactorsAuth/#disabling-two-factor-authentication-locally">​</a></h2>
<p>If it is not convenient to enter the code every time you log in during local development, you can disable Two-Factor Authentication
for the dev environment using <code>usersFilterToApply</code> option.</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./index.ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    plugins</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">TwoFactorsAuthPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          twoFaSecretFieldName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;secret2fa&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token function-variable function" style="color:#e6db74">usersFilterToApply</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">adminUser</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> AdminUser</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token comment" style="color:#8292a2;font-style:italic">// if this method returns true, 2FA will be enforced for this user, if returns false - 2FA will be disabled</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token keyword" style="color:#66d9ef">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">env</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token constant" style="color:#e6db74">NODE_ENV</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;development&#x27;</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="select-which-users-should-use-two-factor-authentication">Select which users should use Two-Factor Authentication<a class="hash-link" aria-label="Direct link to Select which users should use Two-Factor Authentication" title="Direct link to Select which users should use Two-Factor Authentication" href="/docs/tutorial/Plugins/TwoFactorsAuth/#select-which-users-should-use-two-factor-authentication">​</a></h2>
<p>By default plugin enforces Two-Factor Authentication for all users.</p>
<p>If you wish to enforce 2FA only for specific users, you can again use <code>usersFilterToApply</code> option:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./adminuser.ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function-variable function" style="color:#e6db74">usersFilterToApply</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">adminUser</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> AdminUser</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#8292a2;font-style:italic">// disable 2FA for users which email is &#x27;adminforth&#x27; or &#x27;adminguest&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">!</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token string" style="color:#a6e22e">&#x27;adminforth&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;adminguest&#x27;</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">includes</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">adminUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">dbUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">email</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can even add a boolean column to the user table to store whether the user should use 2FA or not:</p>
<p>In <code>schema.prisma</code>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./schema.prisma</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">model adminuser </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  id            String     </span><span class="token decorator at operator" style="color:#66d9ef">@</span><span class="token decorator function" style="color:#e6db74">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  created_at    DateTime</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  email         String   </span><span class="token decorator at operator" style="color:#66d9ef">@</span><span class="token decorator function" style="color:#e6db74">unique</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  role          String</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  password_hash String</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  secret2fa     String</span><span class="token operator" style="color:#66d9ef">?</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">  use2fa        Boolean</span><span class="token operator" style="color:#66d9ef">?</span><span class="token plain">  @</span><span class="token keyword" style="color:#66d9ef">default</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token boolean" style="color:#ae81ff">false</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> run makemigration -- </span><span class="token parameter variable" style="color:#f8f8f2">--name</span><span class="token plain"> add-use2fa </span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> run migrate:local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then in <code>adminuser.ts</code>:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./adminuser.ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    resourceId</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;adminuser&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    columns</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            name</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;use2fa&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    options</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      allowedActions</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token function-variable function" style="color:#e6db74">delete</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> adminUser </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> adminUser</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> AdminUser </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token comment" style="color:#8292a2;font-style:italic">// only superadmin can delete users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> adminUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">dbUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">role </span><span class="token operator" style="color:#66d9ef">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;superadmin&#x27;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token function-variable function" style="color:#e6db74">create</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> adminUser </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> adminUser</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> AdminUser </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token comment" style="color:#8292a2;font-style:italic">// only superadmin can create users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> adminUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">dbUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">role </span><span class="token operator" style="color:#66d9ef">===</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;superadmin&#x27;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token function-variable function" style="color:#e6db74">edit</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> adminUser</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> meta </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> adminUser</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> AdminUser </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token comment" style="color:#8292a2;font-style:italic">// user can modify only his own record</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token keyword" style="color:#66d9ef">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> oldRecord </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=</span><span class="token plain"> meta</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> adminUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">dbUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">id </span><span class="token operator" style="color:#66d9ef">===</span><span class="token plain"> oldRecord</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    plugins</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">TwoFactorsAuthPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          twoFaSecretFieldName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;secret2fa&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token function-variable function" style="color:#e6db74">usersFilterToApply</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">adminUser</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> AdminUser</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> adminUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">dbUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">use2fa</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="allow-specific-users-to-skip-two-factor-authentication-setup">Allow Specific Users to Skip Two-Factor Authentication Setup<a class="hash-link" aria-label="Direct link to Allow Specific Users to Skip Two-Factor Authentication Setup" title="Direct link to Allow Specific Users to Skip Two-Factor Authentication Setup" href="/docs/tutorial/Plugins/TwoFactorsAuth/#allow-specific-users-to-skip-two-factor-authentication-setup">​</a></h2>
<p>By default, all users are required to setup Two-Factor Authentication if it is enabled.</p>
<p>If you want to allow specific users to <strong>skip</strong> the 2FA setup, you can use the <code>usersFilterToAllowSkipSetup</code> option:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./adminuser.ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token operator" style="color:#66d9ef">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">plugins</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">TwoFactorsAuthPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          twoFaSecretFieldName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;secret2fa&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token function-variable function" style="color:#e6db74">usersFilterToAllowSkipSetup</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">adminUser</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> AdminUser</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token comment" style="color:#8292a2;font-style:italic">// allow skip setup 2FA for users which email is &#x27;adminforth&#x27; or &#x27;adminguest&#x27;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token keyword" style="color:#66d9ef">return</span><span class="token plain"> </span><span class="token operator" style="color:#66d9ef">!</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token string" style="color:#a6e22e">&#x27;adminforth&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;adminguest&#x27;</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token function" style="color:#e6db74">includes</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">adminUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">dbUser</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">email</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#66d9ef">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="passkeys-setup">Passkeys setup<a class="hash-link" aria-label="Direct link to Passkeys setup" title="Direct link to Passkeys setup" href="/docs/tutorial/Plugins/TwoFactorsAuth/#passkeys-setup">​</a></h2>
<p>If you want to use both passkeys and TOTP simultaneously, you can set them up as follows:</p>
<p>First, you need to create a passkeys table in your schema.prisma file:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./schema.prisma</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">  model passkeys </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">    credential_id           String </span><span class="token decorator at operator" style="color:#66d9ef">@</span><span class="token decorator function" style="color:#e6db74">id</span><span class="token plain"> </span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">    user_id                 String</span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">    meta                    String</span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">    @</span><span class="token decorator at operator" style="color:#66d9ef">@</span><span class="token decorator function" style="color:#e6db74">index</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">user_id</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And make migration:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> run makemigration -- </span><span class="token parameter variable" style="color:#f8f8f2">--name</span><span class="token plain"> add-passkeys </span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"> </span><span class="token function" style="color:#e6db74">npm</span><span class="token plain"> run migrate:local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Next, you need to create a new resource for passkeys:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./resources/passkeys.ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> AdminForthDataTypes</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> AdminForthResourceInput </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;../../adminforth&quot;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">export</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    dataSource</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;maindb&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    table</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;passkeys&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    resourceId</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;passkeys&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    label</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;Passkeys&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    columns</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        name</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;credential_id&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        label</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;Credential ID&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        primaryKey</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        name</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;user_id&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        label</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;User ID&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        name</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;meta&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        type</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> AdminForthDataTypes</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token constant" style="color:#e6db74">JSON</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        label</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;Meta&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    plugins</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    options</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">as</span><span class="token plain"> AdminForthResourceInput</span><span class="token punctuation" style="color:#f8f8f2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Add the new resource to index.ts:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">./index.ts</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#66d9ef">import</span><span class="token plain"> passkeysResource </span><span class="token keyword" style="color:#66d9ef">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./resources/passkeys.js&#x27;</span><span class="token punctuation" style="color:#f8f8f2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  resources</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">  passkeysResource</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token operator" style="color:#66d9ef">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, update the settings of the Two-Factor Authentication plugin:</p>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#f8f8f2;background-color:#272822"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token plain">  plugins</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">TwoFactorsAuthPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      twoFaSecretFieldName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;secret2fa&#x27;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      timeStepWindow</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token number" style="color:#ae81ff">1</span><span class="token plain">       </span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">      passkeys</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">        challengesKeyValueAdapter</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token keyword" style="color:#66d9ef">new</span><span class="token plain"> </span><span class="token class-name" style="color:#e6db74">RAMKeyValueAdapter</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"> </span><span class="token comment" style="color:#8292a2;font-style:italic">// you can use any key-value adapter</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">        credentialResourceID</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;passkeys&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">        credentialIdFieldName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;credential_id&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">        credentialMetaFieldName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;meta&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">        credentialUserIdFieldName</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;user_id&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">        settings</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token comment" style="color:#8292a2;font-style:italic">// relying party config</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            rp</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">                name</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;New Reality&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token comment" style="color:#8292a2;font-style:italic">// id should be a app domain name without port</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token comment" style="color:#8292a2;font-style:italic">// e.g. if you run locally in https://localhost:3500 -&gt; then write &quot;localhost&quot;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">                </span><span class="token comment" style="color:#8292a2;font-style:italic">// if you run at https://myadmin.myproduct.com -&gt; write  &quot;myadmin.myproduct.com&quot;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">                id</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;localhost&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            user</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">                nameField</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;email&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">                displayNameField</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;email&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            authenticatorSelection</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">              </span><span class="token comment" style="color:#8292a2;font-style:italic">//  Can be &quot;platform&quot; or &quot;cross-platform&quot;</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">                authenticatorAttachment</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;platform&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">                requireResidentKey</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ae81ff">true</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">                userVerification</span><span class="token operator" style="color:#66d9ef">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;required&quot;</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line code-block-diff-add-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token punctuation" style="color:#f8f8f2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token punctuation" style="color:#f8f8f2">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>☝️ most likely you should set <code>passkeys.settings.rp.id</code> it from your process.env depending on your env</p>
</blockquote>
<p>The setup is complete. To create a passkey:</p>
<blockquote>
<ol>
<li>Go to the user menu</li>
<li>Click settings</li>
<li>Select &quot;passkeys&quot;</li>
</ol>
</blockquote>
<p><img decoding="async" loading="lazy" alt="alt text" src="data:image/png;base64,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" width="184" height="274" class="img_ev3q"></p>
<blockquote>
<ol start="4">
<li>Add passkey</li>
</ol>
</blockquote>
<p><img decoding="async" loading="lazy" alt="alt text" src="/assets/images/Passkeys2-31bf883c97e783e4caa9e6742c453d55.png" width="1007" height="454" class="img_ev3q"></p>
<p>After adding passkey you can use passkey, instead of TOTP:</p>
<p><img decoding="async" loading="lazy" alt="alt text" src="/assets/images/Passkeys3-edf55e33b6bdf96d82c52d60ff1b2eda.png" width="1636" height="862" class="img_ev3q"></p>
<blockquote>
<p>💡 <strong>Note</strong>: Adding a passkey does not remove the option to use TOTP. If you lose access to your passkey, you can log in using TOTP and reset your passkey.</p>
</blockquote></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tutorial/Plugins/AuditLog/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">AuditLog</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tutorial/Plugins/ForeignInlineList/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ForeignInlineList</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/docs/tutorial/Plugins/TwoFactorsAuth/#installation">Installation</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/tutorial/Plugins/TwoFactorsAuth/#disabling-two-factor-authentication-locally">Disabling Two-Factor Authentication locally</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/tutorial/Plugins/TwoFactorsAuth/#select-which-users-should-use-two-factor-authentication">Select which users should use Two-Factor Authentication</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/tutorial/Plugins/TwoFactorsAuth/#allow-specific-users-to-skip-two-factor-authentication-setup">Allow Specific Users to Skip Two-Factor Authentication Setup</a></li><li><a class="table-of-contents__link toc-highlight" href="/docs/tutorial/Plugins/TwoFactorsAuth/#passkeys-setup">Passkeys setup</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial/gettingStarted/">Tutorial</a></li><li class="footer__item"><a href="https://demo.adminforth.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Live Demo</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api/">API</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/archive/">Blog Archive</a></li><li class="footer__item"><a class="footer__link-item" href="/search/">Find anything</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://devforth.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">DevForth.io<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://devforth.io/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">We can develop admin panel for your project<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/devforth/adminforth" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Devforth sp. z o.o.</div></div></div></footer></div>
</body>
</html>